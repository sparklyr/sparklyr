<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Spark ML -- Logistic Regression — ml_logistic_regression • sparklyr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Spark ML -- Logistic Regression — ml_logistic_regression" />
<meta property="og:description" content="Perform classification using logistic regression." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sparklyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sparklyr/sparklyr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Spark ML -- Logistic Regression</h1>
    <small class="dont-index">Source: <a href='https://github.com/sparklyr/sparklyr/blob/master/R/ml_classification_logistic_regression.R'><code>R/ml_classification_logistic_regression.R</code></a></small>
    <div class="hidden name"><code>ml_logistic_regression.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Perform classification using logistic regression.</p>
    </div>

    <pre class="usage"><span class='fu'>ml_logistic_regression</span><span class='op'>(</span>
  <span class='va'>x</span>,
  formula <span class='op'>=</span> <span class='cn'>NULL</span>,
  fit_intercept <span class='op'>=</span> <span class='cn'>TRUE</span>,
  elastic_net_param <span class='op'>=</span> <span class='fl'>0</span>,
  reg_param <span class='op'>=</span> <span class='fl'>0</span>,
  max_iter <span class='op'>=</span> <span class='fl'>100</span>,
  threshold <span class='op'>=</span> <span class='fl'>0.5</span>,
  thresholds <span class='op'>=</span> <span class='cn'>NULL</span>,
  tol <span class='op'>=</span> <span class='fl'>1e-06</span>,
  weight_col <span class='op'>=</span> <span class='cn'>NULL</span>,
  aggregation_depth <span class='op'>=</span> <span class='fl'>2</span>,
  lower_bounds_on_coefficients <span class='op'>=</span> <span class='cn'>NULL</span>,
  lower_bounds_on_intercepts <span class='op'>=</span> <span class='cn'>NULL</span>,
  upper_bounds_on_coefficients <span class='op'>=</span> <span class='cn'>NULL</span>,
  upper_bounds_on_intercepts <span class='op'>=</span> <span class='cn'>NULL</span>,
  features_col <span class='op'>=</span> <span class='st'>"features"</span>,
  label_col <span class='op'>=</span> <span class='st'>"label"</span>,
  family <span class='op'>=</span> <span class='st'>"auto"</span>,
  prediction_col <span class='op'>=</span> <span class='st'>"prediction"</span>,
  probability_col <span class='op'>=</span> <span class='st'>"probability"</span>,
  raw_prediction_col <span class='op'>=</span> <span class='st'>"rawPrediction"</span>,
  uid <span class='op'>=</span> <span class='fu'><a href='random_string.html'>random_string</a></span><span class='op'>(</span><span class='st'>"logistic_regression_"</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A <code>spark_connection</code>, <code>ml_pipeline</code>, or a <code>tbl_spark</code>.</p></td>
    </tr>
    <tr>
      <th>formula</th>
      <td><p>Used when <code>x</code> is a <code>tbl_spark</code>. R formula as a character string or a formula. This is used to transform the input dataframe before fitting, see <a href='ft_r_formula.html'>ft_r_formula</a> for details.</p></td>
    </tr>
    <tr>
      <th>fit_intercept</th>
      <td><p>Boolean; should the model be fit with an intercept term?</p></td>
    </tr>
    <tr>
      <th>elastic_net_param</th>
      <td><p>ElasticNet mixing parameter, in range [0, 1]. For alpha = 0, the penalty is an L2 penalty. For alpha = 1, it is an L1 penalty.</p></td>
    </tr>
    <tr>
      <th>reg_param</th>
      <td><p>Regularization parameter (aka lambda)</p></td>
    </tr>
    <tr>
      <th>max_iter</th>
      <td><p>The maximum number of iterations to use.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>in binary classification prediction, in range [0, 1].</p></td>
    </tr>
    <tr>
      <th>thresholds</th>
      <td><p>Thresholds in multi-class classification to adjust the probability of predicting each class. Array must have length equal to the number of classes, with values &gt; 0 excepting that at most one value may be 0. The class with largest value <code>p/t</code> is predicted, where <code>p</code> is the original probability of that class and <code>t</code> is the class's threshold.</p></td>
    </tr>
    <tr>
      <th>tol</th>
      <td><p>Param for the convergence tolerance for iterative algorithms.</p></td>
    </tr>
    <tr>
      <th>weight_col</th>
      <td><p>The name of the column to use as weights for the model fit.</p></td>
    </tr>
    <tr>
      <th>aggregation_depth</th>
      <td><p>(Spark 2.1.0+) Suggested depth for treeAggregate (&gt;= 2).</p></td>
    </tr>
    <tr>
      <th>lower_bounds_on_coefficients</th>
      <td><p>(Spark 2.2.0+) Lower bounds on coefficients if fitting under bound constrained optimization.
The bound matrix must be compatible with the shape (1, number of features) for binomial regression, or (number of classes, number of features) for multinomial regression.</p></td>
    </tr>
    <tr>
      <th>lower_bounds_on_intercepts</th>
      <td><p>(Spark 2.2.0+) Lower bounds on intercepts if fitting under bound constrained optimization.
The bounds vector size must be equal with 1 for binomial regression, or the number of classes for multinomial regression.</p></td>
    </tr>
    <tr>
      <th>upper_bounds_on_coefficients</th>
      <td><p>(Spark 2.2.0+) Upper bounds on coefficients if fitting under bound constrained optimization.
The bound matrix must be compatible with the shape (1, number of features) for binomial regression, or (number of classes, number of features) for multinomial regression.</p></td>
    </tr>
    <tr>
      <th>upper_bounds_on_intercepts</th>
      <td><p>(Spark 2.2.0+) Upper bounds on intercepts if fitting under bound constrained optimization.
The bounds vector size must be equal with 1 for binomial regression, or the number of classes for multinomial regression.</p></td>
    </tr>
    <tr>
      <th>features_col</th>
      <td><p>Features column name, as a length-one character vector. The column should be single vector column of numeric values. Usually this column is output by <code><a href='ft_r_formula.html'>ft_r_formula</a></code>.</p></td>
    </tr>
    <tr>
      <th>label_col</th>
      <td><p>Label column name. The column should be a numeric column. Usually this column is output by <code><a href='ft_r_formula.html'>ft_r_formula</a></code>.</p></td>
    </tr>
    <tr>
      <th>family</th>
      <td><p>(Spark 2.1.0+) Param for the name of family which is a description of the label distribution to be used in the model. Supported options: "auto", "binomial", and "multinomial."</p></td>
    </tr>
    <tr>
      <th>prediction_col</th>
      <td><p>Prediction column name.</p></td>
    </tr>
    <tr>
      <th>probability_col</th>
      <td><p>Column name for predicted class conditional probabilities.</p></td>
    </tr>
    <tr>
      <th>raw_prediction_col</th>
      <td><p>Raw prediction (a.k.a. confidence) column name.</p></td>
    </tr>
    <tr>
      <th>uid</th>
      <td><p>A character string used to uniquely identify the ML estimator.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Optional arguments; see Details.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The object returned depends on the class of <code>x</code>.</p>
<ul>
<li><p><code>spark_connection</code>: When <code>x</code> is a <code>spark_connection</code>, the function returns an instance of a <code>ml_estimator</code> object. The object contains a pointer to
  a Spark <code>Predictor</code> object and can be used to compose
  <code>Pipeline</code> objects.</p></li>
<li><p><code>ml_pipeline</code>: When <code>x</code> is a <code>ml_pipeline</code>, the function returns a <code>ml_pipeline</code> with
  the predictor appended to the pipeline.</p></li>
<li><p><code>tbl_spark</code>: When <code>x</code> is a <code>tbl_spark</code>, a predictor is constructed then
  immediately fit with the input <code>tbl_spark</code>, returning a prediction model.</p></li>
<li><p><code>tbl_spark</code>, with <code>formula</code>: specified When <code>formula</code>
    is specified, the input <code>tbl_spark</code> is first transformed using a
    <code>RFormula</code> transformer before being fit by
    the predictor. The object returned in this case is a <code>ml_model</code> which is a
    wrapper of a <code>ml_pipeline_model</code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>When <code>x</code> is a <code>tbl_spark</code> and <code>formula</code> (alternatively, <code>response</code> and <code>features</code>) is specified, the function returns a <code>ml_model</code> object wrapping a <code>ml_pipeline_model</code> which contains data pre-processing transformers, the ML predictor, and, for classification models, a post-processing transformer that converts predictions into class labels. For classification, an optional argument <code>predicted_label_col</code> (defaults to <code>"predicted_label"</code>) can be used to specify the name of the predicted label column. In addition to the fitted <code>ml_pipeline_model</code>, <code>ml_model</code> objects also contain a <code>ml_pipeline</code> object where the ML predictor stage is an estimator ready to be fit against data. This is utilized by <code><a href='ml-persistence.html'>ml_save</a></code> with <code>type = "pipeline"</code> to faciliate model refresh workflows.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>See <a href='http://spark.apache.org/docs/latest/ml-classification-regression.html'>http://spark.apache.org/docs/latest/ml-classification-regression.html</a> for
  more information on the set of supervised learning algorithms.</p>
<p>Other ml algorithms: 
<code><a href='ml_aft_survival_regression.html'>ml_aft_survival_regression</a>()</code>,
<code><a href='ml_decision_tree_classifier.html'>ml_decision_tree_classifier</a>()</code>,
<code><a href='ml_gbt_classifier.html'>ml_gbt_classifier</a>()</code>,
<code><a href='ml_generalized_linear_regression.html'>ml_generalized_linear_regression</a>()</code>,
<code><a href='ml_isotonic_regression.html'>ml_isotonic_regression</a>()</code>,
<code><a href='ml_linear_regression.html'>ml_linear_regression</a>()</code>,
<code><a href='ml_linear_svc.html'>ml_linear_svc</a>()</code>,
<code><a href='ml_multilayer_perceptron_classifier.html'>ml_multilayer_perceptron_classifier</a>()</code>,
<code><a href='ml_naive_bayes.html'>ml_naive_bayes</a>()</code>,
<code><a href='ml_one_vs_rest.html'>ml_one_vs_rest</a>()</code>,
<code><a href='ml_random_forest_classifier.html'>ml_random_forest_classifier</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='va'>sc</span> <span class='op'>&lt;-</span> <span class='fu'><a href='spark-connections.html'>spark_connect</a></span><span class='op'>(</span>master <span class='op'>=</span> <span class='st'>"local"</span><span class='op'>)</span>
<span class='va'>mtcars_tbl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='sdf_copy_to.html'>sdf_copy_to</a></span><span class='op'>(</span><span class='va'>sc</span>, <span class='va'>mtcars</span>, name <span class='op'>=</span> <span class='st'>"mtcars_tbl"</span>, overwrite <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>partitions</span> <span class='op'>&lt;-</span> <span class='va'>mtcars_tbl</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='sdf_random_split.html'>sdf_random_split</a></span><span class='op'>(</span>training <span class='op'>=</span> <span class='fl'>0.7</span>, test <span class='op'>=</span> <span class='fl'>0.3</span>, seed <span class='op'>=</span> <span class='fl'>1111</span><span class='op'>)</span>

<span class='va'>mtcars_training</span> <span class='op'>&lt;-</span> <span class='va'>partitions</span><span class='op'>$</span><span class='va'>training</span>
<span class='va'>mtcars_test</span> <span class='op'>&lt;-</span> <span class='va'>partitions</span><span class='op'>$</span><span class='va'>test</span>

<span class='va'>lr_model</span> <span class='op'>&lt;-</span> <span class='va'>mtcars_training</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ml_logistic_regression</span><span class='op'>(</span><span class='va'>am</span> <span class='op'>~</span> <span class='va'>gear</span> <span class='op'>+</span> <span class='va'>carb</span><span class='op'>)</span>

<span class='va'>pred</span> <span class='op'>&lt;-</span> <span class='fu'><a href='ml-transform-methods.html'>ml_predict</a></span><span class='op'>(</span><span class='va'>lr_model</span>, <span class='va'>mtcars_test</span><span class='op'>)</span>

<span class='fu'><a href='ml_evaluator.html'>ml_binary_classification_evaluator</a></span><span class='op'>(</span><span class='va'>pred</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Javier Luraschi, Kevin Kuo, Kevin Ushey, JJ Allaire, Hossein Falaki, Lu Wang, Andy Zhang, Yitao Li,  The Apache Software Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


