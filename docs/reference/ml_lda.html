<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Spark ML -- Latent Dirichlet Allocation — ml_lda • sparklyr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">sparklyr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/gallery.html">Gallery</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/guides-dplyr.html">dplyr</a>
    </li>
    <li>
      <a href="../articles/guides-mllib.html">mllib</a>
    </li>
    <li>
      <a href="../articles/guides-h2o.html">H2O</a>
    </li>
    <li>
      <a href="../articles/guides-extensions.html">Extensions</a>
    </li>
    <li>
      <a href="../articles/guides-caching.html">Caching</a>
    </li>
    <li>
      <a href="../articles/guides-distributed-r.html">Distributed R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Deployment
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/deployment-overview.html">Overview</a>
    </li>
    <li>
      <a href="../articles/deployment-data-lakes.html">Data Lakes</a>
    </li>
    <li>
      <a href="../articles/deployment-cdh.html">Cloudera</a>
    </li>
    <li>
      <a href="../articles/deployment-amazon.html">Amazon</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../reference/index.html">Functions</a>
    </li>
    <li>
      <a href="https://github.com/rstudio/cheatsheets/raw/master/source/pdfs/sparklyr.pdf">Cheatsheet</a>
    </li>
    <li>
      <a href="../articles/reference-media.html">Media</a>
    </li>
    <li>
      <a href="../news/index.html">News</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/sparklyr">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Spark ML -- Latent Dirichlet Allocation</h1>
    </div>

    
    <p>Fit a Latent Dirichlet Allocation (LDA) model to a Spark DataFrame.</p>
    

    <pre class="usage"><span class='fu'>ml_lda</span>(<span class='no'>x</span>, <span class='kw'>features</span> <span class='kw'>=</span> <span class='fu'>tbl_vars</span>(<span class='no'>x</span>), <span class='kw'>k</span> <span class='kw'>=</span> <span class='fu'>length</span>(<span class='no'>features</span>), <span class='kw'>alpha</span> <span class='kw'>=</span> (<span class='fl'>50</span>/<span class='no'>k</span>) +
  <span class='fl'>1</span>, <span class='kw'>beta</span> <span class='kw'>=</span> <span class='fl'>0.1</span> + <span class='fl'>1</span>, <span class='kw'>ml.options</span> <span class='kw'>=</span> <span class='fu'><a href='ml_options.html'>ml_options</a></span>(), <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>An object coercable to a Spark DataFrame (typically, a
<code>tbl_spark</code>).</p></td>
    </tr>
    <tr>
      <th>features</th>
      <td><p>The name of features (terms) to use for the model fit.</p></td>
    </tr>
    <tr>
      <th>k</th>
      <td><p>The number of topics to estimate.</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>Concentration parameter for the prior placed on documents' distributions over topics. This is a singleton which is replicated to a vector of length <code>k</code> in fitting (as currently EM optimizer only supports symmetric distributions, so all values in the vector should be the same). For Expectation-Maximization optimizer values should be &gt; 1.0.
By default <code>alpha = (50 / k) + 1</code>, where <code>50/k</code> is common in LDA libraries and +1 follows from Asuncion et al. (2009), who recommend a +1 adjustment for EM.</p></td>
    </tr>
    <tr>
      <th>beta</th>
      <td><p>Concentration parameter for the prior placed on topics' distributions over terms. For Expectation-Maximization optimizer value should be &gt; 1.0 and by default <code>beta = 0.1 + 1</code>, where 0.1 gives a small amount of smoothing and +1 follows Asuncion et al. (2009), who recommend a +1 adjustment for EM.</p></td>
    </tr>
    <tr>
      <th>ml.options</th>
      <td><p>Optional arguments, used to affect the model generated. See
<code><a href='ml_options.html'>ml_options</a></code> for more details.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Optional arguments. The <code>data</code> argument can be used to
specify the data to be used when <code>x</code> is a formula; this allows calls
of the form <code><a href='ml_linear_regression.html'>ml_linear_regression(y ~ x, data = tbl)</a></code>, and is
especially useful in conjunction with <code>do</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The topics' distributions over terms are called "beta" in the original LDA paper by Blei et al., but are called "phi" in many later papers such as Asuncion et al., 2009.</p>
<p>For terminology used in LDA model see <a href='https://spark.apache.org/docs/latest/api/scala/index.html#org.apache.spark.ml.clustering.LDA'>Spark LDA documentation</a>.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Original LDA paper (journal version): Blei, Ng, and Jordan. "Latent Dirichlet Allocation." JMLR, 2003.</p>
<p>Asuncion et al. (2009)</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Other Spark ML routines: <code><a href='ml_als_factorization.html'>ml_als_factorization</a></code>,
  <code><a href='ml_decision_tree.html'>ml_decision_tree</a></code>,
  <code><a href='ml_generalized_linear_regression.html'>ml_generalized_linear_regression</a></code>,
  <code><a href='ml_gradient_boosted_trees.html'>ml_gradient_boosted_trees</a></code>,
  <code><a href='ml_kmeans.html'>ml_kmeans</a></code>,
  <code><a href='ml_linear_regression.html'>ml_linear_regression</a></code>,
  <code><a href='ml_logistic_regression.html'>ml_logistic_regression</a></code>,
  <code><a href='ml_multilayer_perceptron.html'>ml_multilayer_perceptron</a></code>,
  <code><a href='ml_naive_bayes.html'>ml_naive_bayes</a></code>,
  <code><a href='ml_one_vs_rest.html'>ml_one_vs_rest</a></code>, <code><a href='ml_pca.html'>ml_pca</a></code>,
  <code><a href='ml_random_forest.html'>ml_random_forest</a></code>,
  <code><a href='ml_survival_regression.html'>ml_survival_regression</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='fu'>library</span>(<span class='no'>janeaustenr</span>)
<span class='fu'>library</span>(<span class='no'>sparklyr</span>)
<span class='fu'>library</span>(<span class='no'>dplyr</span>)

<span class='no'>sc</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='spark-connections.html'>spark_connect</a></span>(<span class='kw'>master</span> <span class='kw'>=</span> <span class='st'>"local"</span>)

<span class='no'>austen_books</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/janeaustenr/topics/austen_books'>austen_books</a></span>()
<span class='no'>books_tbl</span> <span class='kw'>&lt;-</span> <span class='fu'>sdf_copy_to</span>(<span class='no'>sc</span>, <span class='no'>austen_books</span>, <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>first_tbl</span> <span class='kw'>&lt;-</span> <span class='no'>books_tbl</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='fu'>nchar</span>(<span class='no'>text</span>) <span class='kw'>&gt;</span> <span class='fl'>0</span>) <span class='kw'>%&gt;%</span> <span class='fu'>head</span>(<span class='fl'>100</span>)

<span class='no'>first_tbl</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='ft_tokenizer.html'>ft_tokenizer</a></span>(<span class='st'>"text"</span>, <span class='st'>"tokens"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='ft_count_vectorizer.html'>ft_count_vectorizer</a></span>(<span class='st'>"tokens"</span>, <span class='st'>"features"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>ml_lda</span>(<span class='st'>"features"</span>, <span class='kw'>k</span> <span class='kw'>=</span> <span class='fl'>4</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Javier Luraschi, Kevin Ushey, JJ Allaire,  The Apache Software Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
